{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/cohort-8/assignments/7-block-explorer/src/lib/api/config.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\n\n// Environment configuration\nconst API_BASE_URL = process.env.NEXT_PUBLIC_ETHERSCAN_BASE_URL || '';\nconst API_KEY = process.env.NEXT_PUBLIC_ETHERSCAN_API_KEY;\n\nif (!API_KEY && process.env.NEXT_PUBLIC_ETHERSCAN_NODE_ENV === 'production') {\n  console.warn(\n    'Etherscan API key is not configured. Some features may be limited.'\n  );\n}\n\n// API endpoints\nexport const API_ENDPOINTS = {\n  // Account\n  ACCOUNT_BALANCE: '',\n  ACCOUNT_TRANSACTIONS: '',\n  ACCOUNT_INTERNAL_TXS: '',\n  ACCOUNT_TOKEN_TRANSFERS: '',\n  ACCOUNT_NFT_TRANSFERS: '',\n\n  // Transactions\n  TRANSACTION_INFO: '',\n  TRANSACTION_RECEIPT: '',\n\n  // Blocks\n  BLOCK_INFO: '',\n  BLOCK_REWARD: '',\n  BLOCK_COUNTDOWN: '',\n\n  // Tokens\n  TOKEN_INFO: '',\n  TOKEN_SUPPLY: '',\n  TOKEN_BALANCE: '',\n\n  // Gas Tracker\n  GAS_ESTIMATE: '',\n  GAS_ORACLE: '',\n\n  // Stats\n  ETH_PRICE: '',\n  ETH_SUPPLY: '',\n  ETH2_SUPPLY: '',\n  NETWORK_STATS: '',\n\n  // Contract\n  CONTRACT_ABI: '',\n  CONTRACT_SOURCE: '',\n  VERIFY_CONTRACT: '',\n\n  // Pro endpoints\n  HISTORICAL_BLOCKS: '',\n  DAILY_TX_COUNT: '',\n  DAILY_NETWORK_UTIL: '',\n} as const;\n\n// Custom error types\nexport class ApiError extends Error {\n  constructor(\n    public status: number,\n    public code: string,\n    message: string,\n    public data?: any\n  ) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nexport class RateLimitError extends ApiError {\n  constructor(message = 'Rate limit exceeded') {\n    super(429, 'RATE_LIMIT_EXCEEDED', message);\n    this.name = 'RateLimitError';\n  }\n}\n\nexport class NetworkError extends ApiError {\n  constructor(message = 'Network error') {\n    super(0, 'NETWORK_ERROR', message);\n    this.name = 'NetworkError';\n  }\n}\n\n// Request/Response types\nexport interface PaginatedResponse<T> {\n  status: '1' | '0';\n  message: string;\n  result: T[];\n  page?: number;\n  offset?: number;\n  total?: number;\n}\n\nexport interface ApiResponse<T> {\n  status: '1' | '0';\n  message: string;\n  result: T;\n}\n\nexport interface PaginationParams {\n  page?: number;\n  offset?: number;\n  limit?: number;\n  sort?: 'asc' | 'desc';\n}\n\nexport interface EtherscanParams extends Record<string, any> {\n  module: string;\n  action: string;\n  apikey?: string;\n}\n\n// Base API client\nexport const apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n  },\n});\n\n// Request interceptor\napiClient.interceptors.request.use(\n  (config) => {\n    // Add API key to all requests\n    if (API_KEY) {\n      config.params = {\n        ...config.params,\n      };\n    }\n\n    // Add timestamp for cache busting if needed\n    if (config.method === 'get') {\n      config.params = {\n        ...config.params,\n      };\n    }\n\n    const jsonrpcConfig = {\n      ...config,\n      jsonrpc: '2.0',\n    };\n\n    return jsonrpcConfig;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor\napiClient.interceptors.response.use(\n  (response: AxiosResponse) => {\n    // Handle Etherscan API error format\n    if (response.data.status === '0') {\n      const errorMessage = response.data.message || 'API error occurred';\n      const errorCode =\n        response.data.result?.toString().toUpperCase() || 'UNKNOWN_ERROR';\n\n      if (errorMessage.includes('rate limit')) {\n        throw new RateLimitError(errorMessage);\n      }\n\n      throw new ApiError(\n        response.status,\n        errorCode,\n        errorMessage,\n        response.data\n      );\n    }\n\n    return response;\n  },\n  (error: AxiosError) => {\n    if (error.response) {\n      // Server responded with error\n      throw new ApiError(\n        error.response.status,\n        'HTTP_ERROR',\n        error.message,\n        error.response.data\n      );\n    } else if (error.request) {\n      // Request made but no response\n      throw new NetworkError(\n        'No response from server. Please check your connection.'\n      );\n    } else {\n      // Something else happened\n      throw new ApiError(0, 'REQUEST_ERROR', error.message);\n    }\n  }\n);\n\n// Helper function to make API calls\nexport async function apiRequest<T>(config: AxiosRequestConfig): Promise<T> {\n  try {\n    const response = await apiClient(config);\n    return response.data;\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError(0, 'UNKNOWN_ERROR', 'An unknown error occurred');\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/cohort-8/assignments/7-block-explorer/src/components/QueryProvider.tsx"],"sourcesContent":["'use client';\n\nimport {\n  QueryClient,\n  QueryClientProvider,\n  QueryErrorResetBoundary,\n} from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { Suspense, useState } from 'react';\nimport { ApiError, RateLimitError } from '@/lib/api/config';\n\ninterface QueryProviderProps {\n  children: React.ReactNode;\n}\n\n// Global query client configuration\nexport function createQueryClient() {\n  return new QueryClient({\n    defaultOptions: {\n      queries: {\n        staleTime: 5 * 60 * 1000, // 5 minutes\n        gcTime: 10 * 60 * 1000, // 10 minutes\n        retry: (failureCount, error) => {\n          if (error instanceof RateLimitError) {\n            return false; // Don't retry rate limits\n          }\n          if (\n            error instanceof ApiError &&\n            error.status >= 400 &&\n            error.status < 500\n          ) {\n            return false; // Don't retry client errors\n          }\n          return failureCount < 2; // Retry others twice\n        },\n        refetchOnWindowFocus: process.env.NODE_ENV === 'production',\n        refetchOnReconnect: true,\n        refetchOnMount: true,\n      },\n      mutations: {\n        retry: 1,\n      },\n    },\n  });\n}\n\n// Error fallback component\nfunction QueryErrorFallback({\n  error,\n  resetErrorBoundary,\n}: {\n  error: Error;\n  resetErrorBoundary: () => void;\n}) {\n  const isRateLimit = error instanceof RateLimitError;\n  const isApiError = error instanceof ApiError;\n\n  return (\n    <div className=\"p-6 bg-red-50 border border-red-200 rounded-lg\">\n      <h3 className=\"text-lg font-semibold text-red-800 mb-2\">\n        {isRateLimit ? 'Rate Limit Exceeded' : 'Error Loading Data'}\n      </h3>\n      <p className=\"text-red-600 mb-4\">\n        {isApiError ? error.message : 'An unexpected error occurred'}\n      </p>\n      <div className=\"flex gap-3\">\n        <button\n          onClick={resetErrorBoundary}\n          className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n        >\n          Try Again\n        </button>\n        {isRateLimit && (\n          <button\n            onClick={() => window.location.reload()}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\"\n          >\n            Reload Page\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Loading fallback component\nfunction QueryLoadingFallback() {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"h-8 bg-gray-200 animate-pulse rounded w-1/4\"></div>\n      <div className=\"h-64 bg-gray-200 animate-pulse rounded\"></div>\n    </div>\n  );\n}\n\nexport function QueryProvider({ children }: QueryProviderProps) {\n  const [queryClient] = useState(() => createQueryClient());\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <QueryErrorResetBoundary>\n        {({ reset }) => (\n          <ErrorBoundary\n            onReset={reset}\n            fallbackRender={({ error, resetErrorBoundary }) => (\n              <QueryErrorFallback\n                error={error}\n                resetErrorBoundary={resetErrorBoundary}\n              />\n            )}\n          >\n            <Suspense fallback={<QueryLoadingFallback />}>{children}</Suspense>\n          </ErrorBoundary>\n        )}\n      </QueryErrorResetBoundary>\n      <ReactQueryDevtools initialIsOpen={false} position=\"bottom-right\" />\n    </QueryClientProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAVA;;;;;;;AAiBO,SAAS;IACd,OAAO,IAAI,qOAAW,CAAC;QACrB,gBAAgB;YACd,SAAS;gBACP,WAAW,IAAI,KAAK;gBACpB,QAAQ,KAAK,KAAK;gBAClB,OAAO,CAAC,cAAc;oBACpB,IAAI,iBAAiB,sLAAc,EAAE;wBACnC,OAAO,OAAO,0BAA0B;oBAC1C;oBACA,IACE,iBAAiB,gLAAQ,IACzB,MAAM,MAAM,IAAI,OAChB,MAAM,MAAM,GAAG,KACf;wBACA,OAAO,OAAO,4BAA4B;oBAC5C;oBACA,OAAO,eAAe,GAAG,qBAAqB;gBAChD;gBACA,sBAAsB,oDAAyB;gBAC/C,oBAAoB;gBACpB,gBAAgB;YAClB;YACA,WAAW;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEA,2BAA2B;AAC3B,SAAS,mBAAmB,EAC1B,KAAK,EACL,kBAAkB,EAInB;IACC,MAAM,cAAc,iBAAiB,sLAAc;IACnD,MAAM,aAAa,iBAAiB,gLAAQ;IAE5C,qBACE,uRAAC;QAAI,WAAU;;0BACb,uRAAC;gBAAG,WAAU;0BACX,cAAc,wBAAwB;;;;;;0BAEzC,uRAAC;gBAAE,WAAU;0BACV,aAAa,MAAM,OAAO,GAAG;;;;;;0BAEhC,uRAAC;gBAAI,WAAU;;kCACb,uRAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;oBAGA,6BACC,uRAAC;wBACC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;wBACrC,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAOX;AAEA,6BAA6B;AAC7B,SAAS;IACP,qBACE,uRAAC;QAAI,WAAU;;0BACb,uRAAC;gBAAI,WAAU;;;;;;0BACf,uRAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;AAEO,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAC5D,MAAM,CAAC,YAAY,GAAG,IAAA,0PAAQ,EAAC,IAAM;IAErC,qBACE,uRAAC,sPAAmB;QAAC,QAAQ;;0BAC3B,uRAAC,8PAAuB;0BACrB,CAAC,EAAE,KAAK,EAAE,iBACT,uRAAC,0OAAa;wBACZ,SAAS;wBACT,gBAAgB,CAAC,EAAE,KAAK,EAAE,kBAAkB,EAAE,iBAC5C,uRAAC;gCACC,OAAO;gCACP,oBAAoB;;;;;;kCAIxB,cAAA,uRAAC,0PAAQ;4BAAC,wBAAU,uRAAC;;;;;sCAA0B;;;;;;;;;;;;;;;;0BAIrD,uRAAC,mPAAkB;gBAAC,eAAe;gBAAO,UAAS;;;;;;;;;;;;AAGzD"}}]
}